{"ast":null,"code":"var _jsxFileName = \"/home/user/Documents/e-commerce-frontend/src/views/Register.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport \"./Register.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Register = props => {\n  _s();\n\n  const [userName, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [emailAddress, setEmailAddress] = useState(\"\"); //const [isAdmin, setIsAdmin] = useState(false);\n\n  const updateData = event => {\n    switch (event.target.name) {\n      case \"userName\":\n        setUsername(event.target.value);\n        break;\n\n      case \"password\":\n        setPassword(event.target.value);\n        break;\n\n      case \"emailAddress\":\n        setEmailAddress(event.target.value);\n        break;\n\n      default:\n        break;\n    }\n  };\n\n  const registerUser = async event => {\n    event.preventDefault();\n    const newCustomer = {\n      userName: userName,\n      emailAddress: emailAddress,\n      password: password\n    };\n    const settings = {\n      method: \"POST\",\n      body: JSON.stringify(newCustomer),\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      credentials: \"include\"\n    }; //const response = await fetch(\"https://e-commerce-apple-product-api.onrender.com/register\", settings);\n\n    const response = await fetch(process.env.REACT_APP_SERVER_URL + \"/register\", settings);\n    const parsedRes = await response.json();\n\n    try {\n      if (response.ok) {\n        const now = new Date();\n        const tokenExpiry = new Date(now.getTime() + 1000 * 60 * 60);\n        localStorage.setItem(\"data\", JSON.stringify({\n          token: parsedRes.token,\n          id: parsedRes.id,\n          expiry: tokenExpiry.toISOString()\n        }));\n        props.login(parsedRes.token, parsedRes.id);\n      } else {\n        throw new Error(parsedRes.message);\n      }\n    } catch (err) {\n      alert(err.message);\n    }\n  };\n\n  const updateShowLogin = () => {\n    props.setShowLogin(true);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"register-main\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"register-header\",\n      children: \"Register\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"register-frame\",\n      children: [/*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"register-form\",\n        onSubmit: registerUser,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"register-label\",\n            children: \"User Name\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"register-input register-input-user-name \",\n            name: \"userName\",\n            onChange: updateData,\n            value: userName,\n            minLength: 3,\n            maxLength: 15\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"register-label\",\n            children: \"Password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"register-input register-input-password\",\n            name: \"password\",\n            onChange: updateData,\n            value: password\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"register-label\",\n            children: \"Email Address\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"register-input\",\n            name: \"emailAddress\",\n            onChange: updateData,\n            value: emailAddress\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"register-signin\",\n          children: \"Sign Up\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 1\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"register-signup\",\n        onClick: updateShowLogin,\n        children: \"Sign in\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 1\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Register, \"l319sg7T6eTMOUPHP4NPvjUe3u4=\");\n\n_c = Register;\nexport default Register;\n\nvar _c;\n\n$RefreshReg$(_c, \"Register\");","map":{"version":3,"names":["React","useState","Register","props","userName","setUsername","password","setPassword","emailAddress","setEmailAddress","updateData","event","target","name","value","registerUser","preventDefault","newCustomer","settings","method","body","JSON","stringify","headers","credentials","response","fetch","process","env","REACT_APP_SERVER_URL","parsedRes","json","ok","now","Date","tokenExpiry","getTime","localStorage","setItem","token","id","expiry","toISOString","login","Error","message","err","alert","updateShowLogin","setShowLogin"],"sources":["/home/user/Documents/e-commerce-frontend/src/views/Register.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport \"./Register.css\"\nconst Register = props => {\n  const [userName, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [emailAddress, setEmailAddress] = useState(\"\");\n  //const [isAdmin, setIsAdmin] = useState(false);\n\n  const updateData = event => {\n    switch (event.target.name) {\n      case \"userName\":\n        setUsername(event.target.value);\n        break;\n      case \"password\":\n        setPassword(event.target.value);\n        break;\n      case \"emailAddress\":\n        setEmailAddress(event.target.value);\n        break;\n      default:\n        break;\n    }\n  }\n  const registerUser = async event => {\n    event.preventDefault();\n    const newCustomer = {\n      userName: userName,\n      emailAddress: emailAddress,\n      password: password\n    \n    }\n    const settings = {\n      method: \"POST\",\n      body: JSON.stringify(newCustomer),\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      credentials: \"include\"\n    }\n    \n    //const response = await fetch(\"https://e-commerce-apple-product-api.onrender.com/register\", settings);\n    const response = await fetch(process.env.REACT_APP_SERVER_URL + \"/register\", settings);\n    const parsedRes = await response.json();\n\n    try {\n      if (response.ok) {\n        const now = new Date();\n        const tokenExpiry = new Date(now.getTime() + 1000 * 60 * 60); \n        localStorage.setItem(\"data\", JSON.stringify({ token: parsedRes.token, id: parsedRes.id, expiry: tokenExpiry.toISOString() }));\n        props.login(parsedRes.token, parsedRes.id);\n      } else {\n        throw new Error(parsedRes.message);\n      }\n    } catch (err) {\n      alert(err.message);\n    }\n  }\n\n  const updateShowLogin = () => {\n    props.setShowLogin(true);\n  }\n\n  return (\n    <div className=\"register-main\">\n      <h1 className=\"register-header\">Register</h1>\n<div className=\"register-frame\">\n<form className=\"register-form\" onSubmit={registerUser}>\n        <div>\n          <label className=\"register-label\">User Name</label>\n          <input className=\"register-input register-input-user-name \" name=\"userName\" onChange={updateData} value={userName} minLength={3} maxLength={15} />\n        </div>\n        <div>\n          <label className=\"register-label\">Password</label>\n          <input className=\"register-input register-input-password\" name=\"password\" onChange={updateData} value={password} />\n        </div>\n        <div>\n          <label className=\"register-label\">Email Address</label>\n          <input className=\"register-input\" name=\"emailAddress\" onChange={updateData} value={emailAddress} />\n        </div>\n\n        <button className='register-signin'>Sign Up</button>\n      </form>\n      <button className=\"register-signup\" onClick={updateShowLogin}>Sign in</button>\n     \n</div>\n     \n    </div>\n  )\n}\n\nexport default Register;"],"mappings":"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"},"metadata":{},"sourceType":"module"}